# LiveSeeder

trigger:
    - master
    
    pool:
      vmImage: 'ubuntu-latest'
    
    variables:
      buildConfiguration: 'Release'
    
    steps:
    
    - task: NuGetToolInstaller@1
      inputs:
        versionSpec: 
    
    - task: NuGetCommand@2
      inputs:
        command: 'restore'
        restoreSolution: '**/*.sln'
        feedsToUse: 'select'
    
    - task: DotNetCoreCLI@2
      displayName: Build
      inputs:
        arguments: '--configuration $(BuildConfiguration)'
    
    - task: DotNetCoreCLI@2
      displayName: "dotnet test"
      inputs:
        command: 'test'

    - task: DotNetCoreCLI@2
      displayName: "dotnet publish"
      inputs:
        command: 'publish'
        publishWebProjects: True
        arguments: '-c $(buildConfiguration) --output $(Build.ArtifactStagingDirectory)'
        zipAfterPublish: True
    
    - task: PublishPipelineArtifact@1
      inputs:
        targetPath: '$(Pipeline.Workspace)'
        artifact: 'drop'
        publishLocation: 'pipeline'
    
# 
#export DAPPER_LICENSENAME=""
#export DAPPER_LICENSEKEY=""